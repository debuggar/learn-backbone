<!DOCTYPE html>
<html>
   
   <head>
      <title>Learn Backbone</title>
      <script src = "https://code.jquery.com/jquery-2.1.3.min.js"
         type = "text/javascript"></script>
      
      <script src = "https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.2/underscore-min.js"
         type = "text/javascript"></script>
      
      <script src = "https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"
         type = "text/javascript"></script>
   </head>
   
   <body>
       <div>
           <a href="http://underscorejs.org/#groupBy">UnderscoreJs</a> <br>
           <a href="http://backbonejs.org/">Backbonejs</a>
       </div>
        <br>

      <script type = "text/javascript">
         
         var MyModel = Backbone.Model.extend();    
    
         var mydata = [  
            {id:4, name: 'Sachin Tendulkar'},  
            {id:2, name: 'Rahul Dravid'},  
            {id:3, name: 'Saurav Ganguly'}  
         ];  
  
         var myval = new Backbone.Collection(mydata,{  
            model:MyModel,   
            comparator: 'name'  
         });  
  
          document.write("The sorted (based on name) order of collection: ",  
            JSON.stringify(myval) ,"<br><br>"
         );  

         var birthData=[  {
                       name: "Bob",
                       date: "Thu Mar 29 2012"
                   },
                   {
                       name: "James",
                       date: "Fri Mar 30 2012"
                   },
                    {
                       name: "Stanley",
                       date: "Sat Mar 31 2012"
                   },
                   {
                       name: "Dylan",
                       date: "Fri Mar 30 2012"
                   }
               ];

           var birthdayModel=Backbone.Model.extend();     

           var birtdayCollection= new Backbone.Collection(birthData,{
                model:birthdayModel
           });

           document.write( JSON.stringify(birtdayCollection) )
           document.write("<br><br>");

           var birtdayCollectionGroupBy=birtdayCollection.groupBy( function(model){
              return model.get('date');
            });

           document.write( JSON.stringify( birtdayCollectionGroupBy ),"<br><br>" );

           var x=_.groupBy([1.3, 2.1, 2.4], function(num){ return Math.floor(num); });

           document.write( JSON.stringify(x),"<br><br>")

           var gb=_.groupBy(['one', 'two', 'three'], 'length');
           document.write(JSON.stringify(gb),"<br><br>");

           var todo= new Backbone.Collection();

           todo.add([
                { title:'go to Bangalore' , completed: false },
                { title:'go to Delhi' , completed: true },
                { title:'go to Mumbai' , completed: false },
                { title:'go to Goa' , completed: true },
                { title:'go to Kolkata' , completed: false }
            ]) 

           var byCompleted=todo.groupBy('completed');
           document.write( JSON.stringify( byCompleted ) ,"<br><br>" );

           var completed=new Backbone.Collection( byCompleted[true] );

           document.write( JSON.stringify( completed ),"<br><br>"  );

           document.write(completed.pluck('title') ,"<br><br>");

           var x=_.omit({name: 'moe', age: 50, userid: 'moe1'}, 'userid');
           console.log(x);


           var  Person = Backbone.Model.extend({
               defaults:{
                    fname:'',
                    lname:'Kumar'
               }
           });
           var person = new Person({ fname: "John", lname:"Smith"});
           document.write("Name of the person: ", person.get('fname') ,"<br><br>");

           var newPerson=person.omit('lname');
           document.write( JSON.stringify(newPerson) );

           var Todo = Backbone.Model.extend({
                defaults:{
                     title:'',
                     completed : false
                }
           });
           var do1 = new Todo( { title: 'Go to Coimbatore' }  );
           document.write(JSON.stringify(do1),"<br><br>" ); 
           document.write( JSON.stringify( do1.omit('completed') ) ,"<br><br>" );
           document.write( do1.keys()," <br> ",do1.values(),"<br><br>" ); 
           
           var pairs=do1.pairs();
           document.write( pairs[0],"<br>",pairs[1] ,"<br><br>");

           do1=do1.invert();
           document.write(JSON.stringify(do1),"<br><br>" ); 

          // Chainable API example 

            var collection = new Backbone.Collection([
              { name: 'Tim', age: 5 },
              { name: 'Ida', age: 26 },
              { name: 'Rob', age: 55 }
            ]);

            var filteredNames = collection.chain() 
              .filter(function(item) { return item.get('age') > 10; }) 
              .map(function(item) { return item.get('name'); })
              .value();

            document.write(filteredNames,"<br><br>");

            collection
              .filter(function(item) { return item.get('age') > 10; })
              .map(function(item) { return item.get('name'); }) ;

            document.write( JSON.stringify(collection) );


      </script>
      
   </body>
</html>













